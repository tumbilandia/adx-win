//El jobs o tarea que se crea en Jenkins tiene que ser de tipo pipeline
pipeline {
    agent any
        stages {
            stage('Run playbook') {
              steps{
                //Copia el contenido bajado del repo a la maquina controller
                //***sh script: "scp $WORKSPACE ansible-controller:/home/$user/"
                //Ejecuta el playbook en la maquina ansible controller, el user y pass se pasan como parametro con -e ${user} -e ${passwd}
                //sh label:'playbook', script: "ssh ansible-controller ansible-playbook ./playbook/site.yml -i ./playbook/laboratory"
                //***sh label:'playbook', script: "ssh ansible-controller ansible-playbook ./playbook_sw_installation/software_installation.yml -i ./playbook_sw_installation/inventory"
                //sh 'echo hola mundo'
                echo "Hello World!"
                echo "Running ${env.BUILD_ID} on ${env.JENKINS_URL}"
                //** Running 7 on http://localhost:8080/ **//
                bat 'wmic computersystem get name'
                //** C:\Users\rra12\.jenkins\workspace\adx-win04>wmic computersystem get name
                //*MANGO
                //** bat 'scp'
                //** ok with .cmd
                bat 'e:\\_dev\\sopra\\projects\\airbus\\00-TransformationPlan\\01.0-DevOps\\20230126\\scm-test.cmd'
                //sh "echo Hello from the shell"
                //sh "hostname"
                //sh "uptime"
                //**sh script: "scp $WORKSPACE ansible-controller:/home/$user/"
                //bat 'scp -i e:\\_dev\\sopra\\projects\\airbus\\00-TransformationPlan\\01.0-DevOps\\20230126\\adx-devops $WORKSPACE rra@192.168.46.130:/home/rra/'
                echo "my workspace content: ${env.WORKSPACE}"
                echo "--------------"
                echo $WORKSPACE
              }
            }
        }
}
